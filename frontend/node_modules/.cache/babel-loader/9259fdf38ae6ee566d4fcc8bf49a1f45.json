{"ast":null,"code":"import _classCallCheck from \"/home/fractaluser/Desktop/Dev/music/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fractaluser/Desktop/Dev/music/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fractaluser/Desktop/Dev/music/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fractaluser/Desktop/Dev/music/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/fractaluser/Desktop/Dev/music/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fractaluser/Desktop/Dev/music/frontend/src/views/signin/signin.view.js\";\nimport React from 'react';\nimport { Link } from \"react-router-dom\";\nimport MainHeader from '../../components/main-header/main-header.component';\nimport { ToastsContainer, ToastsStore } from 'react-toasts';\nimport FormatUrl from \"utils/UrlFormatter\";\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SignIn, _React$Component);\n\n  function SignIn(props) {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignIn).call(this, props));\n\n    _this.handleSuccess = function () {\n      localStorage.setItem(\"login_id\", _this.state.login_id);\n\n      _this.mainheader.current.handleSuccess();\n    };\n\n    _this.submitForm = function () {\n      var username = _this.state.username;\n      var password = _this.state.password;\n\n      if (!username || !username.length) {\n        ToastsStore.warning(\"username required\", 3000, \"toast-box-pink\");\n        return;\n      }\n\n      if (!password || !password.length) {\n        ToastsStore.warning(\"password required\", 3000, \"toast-box-pink\");\n        return;\n      }\n\n      var url = FormatUrl(\"/signin\");\n      fetch(url, {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username,\n          password: password\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (res) {\n        if (res.length) {\n          _this.setState({\n            login_username: res[0].username,\n            login_id: res[0].id\n          }, function () {\n            return _this.handleSuccess();\n          });\n\n          ToastsStore.success(\"Login successful\", 3000, \"toast-box-pink\");\n        } else {\n          ToastsStore.error(\"Login failed\", 3000, \"toast-box-pink\");\n        }\n      }).catch(function (err) {\n        ToastsStore.error(\"Internal server erro\", 3000, \"toast-box-pink\");\n      });\n    };\n\n    _this.cancelForm = function () {\n      document.getElementById(\"username\").value = \"\";\n      document.getElementById(\"password\").value = \"\";\n    };\n\n    _this.state = {\n      username: '',\n      password: '',\n      login_username: null,\n      login_id: null\n    };\n    _this.mainheader = React.createRef();\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        id: \"site\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(MainHeader, {\n        ref: this.mainheader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main-w3layouts wrapper\",\n        style: {\n          backgroundImage: \"url(\\\"https://themeim.com/demo/milando/media/banner/6.jpg\\\")\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"SignIn Form\"), React.createElement(\"div\", {\n        className: \"main-agileinfo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"agileits-top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"text email\",\n        id: \"username\",\n        type: \"text\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            username: e.target.value\n          });\n        },\n        placeholder: \"Username\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"text\",\n        id: \"password\",\n        type: \"password\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        placeholder: \"Password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"form-button\",\n        onClick: this.submitForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Ok\")), React.createElement(\"div\", {\n        className: \"col-sm-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"form-button\",\n        onClick: this.cancelForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Cancel\"))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Don't have an Account? \", React.createElement(Link, {\n        to: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \" Register Now!\")))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })), React.createElement(ToastsContainer, {\n        store: ToastsStore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SignIn;\n}(React.Component);\n\nexport default SignIn;","map":{"version":3,"sources":["/home/fractaluser/Desktop/Dev/music/frontend/src/views/signin/signin.view.js"],"names":["React","Link","MainHeader","ToastsContainer","ToastsStore","FormatUrl","SignIn","props","handleSuccess","localStorage","setItem","state","login_id","mainheader","current","submitForm","username","password","length","warning","url","fetch","method","headers","body","JSON","stringify","then","response","json","res","setState","login_username","id","success","error","catch","err","cancelForm","document","getElementById","value","createRef","backgroundImage","e","target","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Link } from \"react-router-dom\";\nimport MainHeader from '../../components/main-header/main-header.component';\nimport { ToastsContainer, ToastsStore } from 'react-toasts';\nimport FormatUrl from \"utils/UrlFormatter\";\n\n\nclass SignIn extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            username:'',\n            password:'',\n            login_username:null,\n            login_id: null\n        }\n        this.mainheader = React.createRef()\n    }\n\n    handleSuccess = () => {\n        localStorage.setItem(\"login_id\", this.state.login_id)\n        this.mainheader.current.handleSuccess()   \n    }\n\n    submitForm = () => {\n        let username = this.state.username;\n        let password = this.state.password;\n        if(!username || !username.length){\n            ToastsStore.warning(\"username required\", 3000, \"toast-box-pink\")\n            return\n        }\n        if(!password || !password.length){\n            ToastsStore.warning(\"password required\", 3000, \"toast-box-pink\")\n            return\n        }\n        let url = FormatUrl(`/signin`)\n        fetch(url, {\n            method: 'post',\n            headers:{\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                username: username,\n                password:password\n            })\n            })\n        .then(response => response.json())\n        .then(res => {\n            if(res.length){\n                this.setState({\n                    login_username: res[0].username,\n                    login_id: res[0].id\n                }, () => this.handleSuccess())\n            ToastsStore.success(\"Login successful\", 3000, \"toast-box-pink\")\n                } else {\n            ToastsStore.error(\"Login failed\", 3000, \"toast-box-pink\")\n            }\n        }).catch(err => {\n            ToastsStore.error(\"Internal server erro\", 3000, \"toast-box-pink\")\n        })\n\n    }\n\n    cancelForm = () => {\n        document.getElementById(\"username\").value = \"\"\n        document.getElementById(\"password\").value = \"\"\n    }\n\n    \n    render(){\n        return (\n            <div id=\"site\">\n            <MainHeader ref={this.mainheader} />\n            <div className=\"main-w3layouts wrapper\" style={{ backgroundImage:`url(\"https://themeim.com/demo/milando/media/banner/6.jpg\")` }}>\n            <br/><br/><br/><br/>\n                <h1>SignIn Form</h1>\n                <div className=\"main-agileinfo\">\n                    <div className=\"agileits-top\">\n                        <input className=\"text email\" id=\"username\" type=\"text\" onChange={(e) => this.setState({username: e.target.value})} placeholder=\"Username\" required />\n                        <input className=\"text\" id=\"password\" type=\"password\" onChange={(e) => this.setState({password: e.target.value})}  placeholder=\"Password\" required />\n                        <div className=\"row\">\n                            <div className=\"col-sm-6\">\n                                <button type=\"button\" className=\"form-button\" onClick={this.submitForm}>Ok</button>\n                            </div>\n                            <div className=\"col-sm-6\">\n                                <button type=\"button\" className=\"form-button\" onClick={this.cancelForm}>Cancel</button>\n                            </div>\n                        </div>\n                        <p>Don't have an Account? <Link to=\"/register\"> Register Now!</Link></p>\n                    </div>\n                </div>\n                <br/><br/>\n            </div>\n            <ToastsContainer store={ToastsStore} />\n            </div>\n        )\n    }\n}\n\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}